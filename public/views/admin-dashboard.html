
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Dashboard Administrativo - SEVOTEC</title>
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/admin-dashboard.css">
</head>
<body>
  <div class="dashboard-grid">
    <!-- Sidebar -->
    <aside class="sidebar">
      <h3 style="margin-bottom: 2rem; font-weight: bold; color: var(--primary);">Admin Panel</h3>
      <nav>
        <a class="nav-link active" onclick="showSection('resumen')">Resumen General</a>
        <a class="nav-link" onclick="showSection('elecciones')">Crear Elecciones</a>
        <a class="nav-link" onclick="showSection('admins')">Gestión Admins</a>
        <a class="nav-link" href="/admin-chat" target="_blank">
          Chat de Soporte
        </a>
        <a href="/" class="nav-link logout">Cerrar Sesión</a>
      </nav>
    </aside>

    <!-- Contenido Principal -->
    <main class="main-content">
      
      <!-- SECCIÓN 1: RESUMEN / ESTADÍSTICAS -->
      <div id="resumen" class="section active">
        <h2 style="margin-bottom: 1.5rem;">Estadísticas en Tiempo Real</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <h4>Total Votantes Registrados</h4>
            <p id="totalVoters">Cargando...</p>
          </div>
          <div class="stat-card">
            <h4>Participación Total</h4>
            <p id="participationRate" style="color: var(--success);">0%</p>
          </div>
          <div class="stat-card">
            <h4>Elecciones Activas</h4>
            <p id="activeElections">0</p>
          </div>
        </div>
      </div>

      <!-- SECCIÓN 2: CREAR ELECCIONES -->
      <div id="elecciones" class="section">
        <h2>Gestión de Procesos Electorales</h2>
        <div class="card" style="margin-top: 1rem; padding: 2rem;">
          <form id="createElectionForm">
            <div class="form-group">
              <label>Nombre del Proceso (Ej: Presidenciales 2025 o Referéndum)</label>
              <input type="text" name="nombre" class="form-control" required>
            </div>
            <div class="form-grid">
              <div class="form-group">
                <label>Fecha Inicio</label>
                <input type="datetime-local" name="fechaInicio" class="form-control" required>
              </div>
              <div class="form-group">
                <label>Fecha Fin</label>
                <input type="datetime-local" name="fechaFin" class="form-control" required>
              </div>
            </div>
            
            <div class="form-group">
              <label>Tipo de Elección</label>
              <select name="tipo" class="form-control">
                <option value="candidatos">Elección de Candidatos</option>
                <option value="normativa">Aprobación de Normativa (Si/No)</option>
              </select>
            </div>

            <div class="form-group">
              <label>Opciones / Candidatos (Separados por coma)</label>
              <input type="text" name="candidatos" placeholder="Ej: Lista A, Lista B, Nulo" class="form-control" required>
            </div>

            <button type="submit" class="btn btn-primary">Crear Proceso Electoral</button>
          </form>
        </div>
      </div>

      <!-- SECCIÓN 3: CRUD ADMINS -->
      <div id="admins" class="section">
        <div class="section-header">
          <h2>Administradores del Sistema</h2>
          <button class="btn btn-outline" onclick="document.getElementById('addAdminForm').style.display='block'">+ Nuevo Admin</button>
        </div>

        <!-- Formulario oculto para agregar admin -->
        <div id="addAdminForm" class="card card-highlight hidden" style="margin-top: 1rem; padding: 1rem;">
          <h4>Registrar Nuevo Administrador</h4>
          <form id="newAdminForm" class="form-inline">
            <input type="text" placeholder="Nombres" name="nombres" class="form-control" required>
            <input type="email" placeholder="Correo" name="correo" class="form-control" required>
            <input type="password" placeholder="Contraseña Temporal" name="password" class="form-control" required>
            <button type="submit" class="btn btn-primary">Guardar</button>
          </form>
        </div>

        <div class="card" style="margin-top: 1rem;">
          <table id="adminsTable">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombres</th>
                <th>Correo</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <!-- Se llena con JS -->
            </tbody>
          </table>
        </div>
      </div>

    </main>
  </div>

  <script src="/js/admin-dashboard.js"></script>
  <script>
    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      event.target.classList.add('active');
    }
  </script>
</body>
</html>